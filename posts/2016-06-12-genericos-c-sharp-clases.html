<!DOCTYPE html>
<html lang=""  itemscope itemtype="http://schema.org/Blog">
<head>
        <!–– Made with Lockdown: https://github.com/fferegrino/lockdown ––>
<meta charset="utf-8" />
<link rel="stylesheet" href="/css/main.css" />

        
</head>

<body>  
        <header class="site-header ui">
    <div class="wrapper menu">
      <nav class="site-nav">
        <a href="#" class="menu-icon">
          <svg viewBox="0 0 18 15">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </a>
        <div class="trigger">
          <a class="link page-link" href="/">Home</a>
          <a class="link page-link" href="/about">About</a>
          <a class="link page-link" href="/search">Search</a>
        </div>
      </nav>
    </div>
    <div class="wrapper title">
      <div class="pure-g">
        <div class="pure-u-1-24 title-number"><span>1</span></div>
        <div class="pure-u-11-24 content-window">
          <a class="site-title" href="/">That C# guy</a>
        </div>
        <div class="pure-u-12-24 header-menu">
          <ul>
            <li class="datascience"><a href="/tag/data-science/">Data Science!</a></li>
            <li class="youtube"><a href="https://www.youtube.com/c/thatcsharpguy">YouTube<a></li>
            <li class="csharp"><a href="/tag/aprendecsharp/">Aprende C#</a></li>
            <li class="xamarin"><a href="/tag/xamarin/">Xamarin</a></li>
          </ul>
        </div>
      </div>
  
  </header>
        <div class="page-content">
            <div class="wrapper">
                
<h1></h1>

<p>Más de C#. En este post toca hablar sobre los genéricos</p>
<p>Los genéricos, y más concretamente en este post los tipos genéricos, son un mecanismo de C# que nos ayuda a maximizar la reutilización de código. La reutilización de código se logra a través de el uso de plantillas (<em>templates</em>) de código en las cuales se insertan marcadores (<em>placeholders</em>) que representarán los tipos de dato que usaremos en nuestra plantilla.</p>
<h2 id="sintaxis">Sintaxis</h2>
<p>La declaración de tipos genéricos se realiza casi como cualquier otro tipo, con la diferencia de que tenemos que declarar los <em>placeholders</em> entre signos <code>&lt;</code> y <code>&gt;</code>, por ejemplo,</p>
<pre><code class="language-csharp">public class Box&lt;T&gt;
</code></pre>
<p>En la cual le estamos indicando que usaremos un marcador llamado <code>T</code>. Que se lee como &quot;Box de T&quot;. Luego entonces dentro de la declaración de la clase podemos reutilizar el marcador <code>T</code> tantas veces como queramos:</p>
<pre><code class="language-csharp">    public T Content { get; private set; }

    public  Box(T content)
    {
        Content = content;
    }
</code></pre>
<p>Para hacer uso de un tipo genérico la sintaxis es más o menos igual a cualquier tipo por referencia: debemos usar el operador <code>new</code>, el constructor de la clase e indicarle dentro de <code>&lt;</code> y <code>&gt;</code> los tipos con los que queremos que se reemplaze el marcador.</p>
<pre><code class="language-csharp">var cajaDeEntero = new Box&lt;int&gt;(5);
var cajaDeString = new Box&lt;string&gt;(&quot;Hola mundo&quot;);

Console.WriteLine(cajaDeEntero.Content); // 5
Console.WriteLine(cajaDeString.Content); // Hola mundo
</code></pre>
<p>También podemos anidar declaraciones en los tipos genéricos:</p>
<pre><code class="language-csharp">var cajaDeCajas = new Box&lt;Box&lt;string&gt;&gt;(cajaDeString);
Console.WriteLine(cajaDeCajas); // [Box: Content=[Box: Content=Hola mundo]]
</code></pre>
<p>No hay &quot;límite&quot; en cuanto al nombre o cantidad de tipos que podemos usar, por ejemplo:</p>
<pre><code class="language-csharp">public class ComplexBox&lt;T, Content1, Content2&gt;
{
    public Content1 C1 { get; set; }
    public Content2 C2 { get; set; }
    public T Item { get; set; }

    public ComplexBox(Content1 c1, Content2 c2)
    {
        C1 = c1;
        C2 = c2;
    }
}

// ...

var cajota = new ComplexBox&lt;double, decimal, float&gt;(1, 2)
{
    Item = 3
};
</code></pre>
<h3 id="restriccion-where">Restricción where</h3>
<p>De entrada, si solo especificamos de esta manera <code>Box&lt;T&gt;</code> los genéricos, podríamos crear objetos a partir de <code>Box</code> sin limitacio</p>
<p>Es por eso que usando la cláusula <em>where X : [Condición]</em> podemos limitar qué tipo de datos aceptará nuestro tipo genérico como <em>marcadores</em>, por ejemplo, supongamos que tenemos las clases:</p>
<pre><code class="language-csharp">public class LimitedBox&lt;T&gt; where T : struct
    // ...

public class LimitedBox&lt;X0,X1&gt; 
    where X0 : struct
    where X1 : IEquatable&lt;X1&gt;
    // ...

public class LimitedBox&lt;T, U, V&gt;
    where T : struct
    where U : IEquatable&lt;U&gt;
    where V : new()
    // ...
</code></pre>
<p>Estamos limitando a que:</p>
<ul>
<li><code>LimitedBox&lt;T&gt;</code> únicamente acepte en <code>T</code>, tipos que sean <code>struct</code> como <code>decimal</code> y <code>DateTime</code></li>
<li><code>LimitedBox&lt;X0, X1&gt;</code> únicamente acepte en <code>X0</code>, tipos que sean <code>struct</code> como <code>decimal</code> y <code>DateTime</code> y en <code>X1</code> objetos que implementen la interfaz <code>IEquatable</code></li>
<li><code>LimitedBox&lt;T, U, V&gt;</code> similar al anterior, solo que en el tercer parámetro, <code>V</code>, únicamente aceptará objetos que tengan un constructor vacío que se a público</li>
</ul>
<p>La lista completa de restricciones se encuentra en <a href="https://msdn.microsoft.com/en-us/library/d5x73970.aspx" target="_blank" rel="nofollow">este enlace</a>.</p>
<h3 id="ejemplos">Ejemplos</h3>
<p>Pero bueno, veamos un ejemplo.</p>
<p>Imaginate un programa para gestionar un deportivo, en el que existen equipos de futbol y de béisbol, compuestos por atletas, <code>Athlete</code>, (que a su vez se divide en futbolistas, <code>FootballPlayer</code>, y por beisbolistas, <code>BaseballPlayer</code>):</p>
<pre><code class="language-csharp">public class Athlete
{
    public string Name { get; set; }
    public double Height { get; set; }
    public double Weight { get; set; }
}
</code></pre>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-2">
```csharp  
public class FootballPlayer : Athlete
{
    public string Position { get; set; }
    public int Goals { get; set; } 
}
```  
</div>
<div class="pure-u-1 pure-u-md-1-2">
```csharp  
public class BaseballPlayer : Athlete
{
    public string Position { get; set; }
    public int GamesStarted { get; set; }  
}
```  
</div>  
</div>
<p>Ahora, para crear los equipos podríamos tener clases separadas para representar cada equipo:</p>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-2">
```csharp  
public class BaseballTeam
{
    public string CoachName { get; set; }
    public BaseballPlayer[] Members { get; set; }
<pre><code>public BaseballTeam(int maxMembers)
{
    Members = new BaseballPlayer[maxMembers];
}
</code></pre>
<p>}</p>
<pre><code>&lt;/div&gt;
&lt;div class=&quot;pure-u-1 pure-u-md-1-2&quot;&gt;
```csharp  
public class FootballTeam
{
    public string CoachName { get; set; }
    public FootballPlayer[] Members { get; set; }

    public FootballTeam(int maxMembers)
    {
        Members = new FootballPlayer[maxMembers];
    }
}
</code></pre>
</div>  
</div>
<p>Y para crear equipos tendríamos que hacer algo así:</p>
<pre><code class="language-csharp">var vitesse = new FootballTeam(18); 
vitesse.Members[0] = new FootballPlayer { Name = &quot;Alex Renato Ibarra Mina&quot; };
        
var losAngeles = new BaseballTeam(25);
losAngeles.Members[0] = new BaseballPlayer { Name = &quot;Julio César Urías&quot; };
</code></pre>
<h3 id="genericos">Genéricos</h3>
<p>O, para maximizar la reutilización de código, podríamos crear una clase genérica, digamos <code>Team&lt;T&gt;</code> (&quot;Team de T&quot;), para poder reutilizarla (y no solo con equipos de futbol o beisbol):</p>
<pre><code class="language-csharp">public class Team&lt;T&gt;
{
    public string CoachName { get; set; }
    public T[] Members { get; set; }

    public Team(int maxMembers)
    {
        Members = new T[maxMembers];
    }
}
</code></pre>
<p>Y usarlo de esta manera:</p>
<pre><code class="language-csharp">var vitesse = new Team&lt;FootballPlayer&gt;(18);
vitesse.Members[0] = new FootballPlayer { Name = &quot;Alex Renato Ibarra Mina&quot; };

var losAngeles = new Team&lt;BaseballPlayer&gt;(25);
losAngeles.Members[0] = new BaseballPlayer { Name = &quot;Julio César Urías&quot; };
</code></pre>
<p>Si dejamos la clase <code>Team&lt;T&gt;</code> como está, podríamos hacer cosas como esta:</p>
<pre><code class="language-csharp">var equipoDeEnteros = new Team&lt;int&gt;(10);
var otroEquipo = new Team&lt;object&gt;(1233);
</code></pre>
<p>Que tal vez no tienen mucho sentido en nuestra aplicación. Es por eso que usando la restricción <code>where</code> podemos limitar al tipo <code>Team&lt;T&gt;</code> para que únicamente acepte <code>Athlete</code>s:</p>
<pre><code class="language-csharp">public class Team&lt;T&gt; where T : Athlete
</code></pre>
<h2 id="ejemplos-del-framework">Ejemplos del Framework</h2>
<p>En el Framework .NET existen numerosos ejemplos de tipos genéricos, siendo el más usado y conocido, las <a href="https://msdn.microsoft.com/es-es/library/bb762916(v=vs.110).aspx" target="_blank" rel="nofollow">colecciones genéricas</a> y las <a href="../tuples-c-sharp">tuplas en C#</a>.</p>
<h2 id="para-cerrar">Para cerrar</h2>
<p>Usar los genéricos permiten dos cosas: Incrementar la reutilización de código manteniendo el tipado fuerte y reducir el impacto al desempeño en nuestras apps al evitar el <a href="https://msdn.microsoft.com/en-us/library/yz2be5wk.aspx" target="_blank" rel="nofollow">boxing y unboxing</a>, de ahí la importancia de su existencia.</p>
<p>Además, los genéricos existen también para métodos, post sobre el que estaré escribiendo en el futuro.</p>


            </div>
          </div>
        
</body>
</html>
