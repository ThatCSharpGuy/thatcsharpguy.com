<!DOCTYPE html>
<html lang=""  itemscope itemtype="http://schema.org/Blog">
<head>
        <!–– Made with Lockdown: https://github.com/fferegrino/lockdown ––>
<meta charset="utf-8" />
<link rel="stylesheet" href="/css/main.css" />

        
</head>

<body>  
        <header class="site-header ui">
    <div class="wrapper menu">
      <nav class="site-nav">
        <a href="#" class="menu-icon">
          <svg viewBox="0 0 18 15">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </a>
        <div class="trigger">
          <a class="link page-link" href="/">Home</a>
          <a class="link page-link" href="/about">About</a>
          <a class="link page-link" href="/search">Search</a>
        </div>
      </nav>
    </div>
    <div class="wrapper title">
      <div class="pure-g">
        <div class="pure-u-1-24 title-number"><span>1</span></div>
        <div class="pure-u-11-24 content-window">
          <a class="site-title" href="/">That C# guy</a>
        </div>
        <div class="pure-u-12-24 header-menu">
          <ul>
            <li class="datascience"><a href="/tag/data-science/">Data Science!</a></li>
            <li class="youtube"><a href="https://www.youtube.com/c/thatcsharpguy">YouTube<a></li>
            <li class="csharp"><a href="/tag/aprendecsharp/">Aprende C#</a></li>
            <li class="xamarin"><a href="/tag/xamarin/">Xamarin</a></li>
          </ul>
        </div>
      </div>
  
  </header>
        <div class="page-content">
            <div class="wrapper">
                
<h1></h1>

<p>Estoy seguro que nadie ha escrito un programa que a la primera salga bien, y también estoy seguro de que para corregir los errores en los tuyos has tenido que <em>debuguear</em> el código. En este post te voy a dar algunos tips para que depures tu código en C# y tu IDE de confianza.</p>
<h2 id="directivas-de-preprocesamiento">Directivas de preprocesamiento</h2>
<p>Primero comencemos por la <a href="../directivas-preprocesador-c-sharp">directiva de preprocesamiento</a> <code>#if</code> y el símbolo <code>DEBUG</code>. Si envuelves cualquier parte de código entre un <code>if DEBUG</code> y <code>#endif</code> únicamente será compilado cuando el símbolo en cuestión esté definido. Si estás usando un IDE es muy común que <code>DEBUG</code> esté definido cuando estás usando la configuración  <em>Debug</em> de tu proyecto.</p>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-2">
<img src="/images/aprende-c-sharp__debugging__config-vs.png" title=""Distintas salidas"" />
</div>
<div class="pure-u-1 pure-u-md-1-2">
<img src="/images/aprende-c-sharp__debugging__config-xs.jpg" title=""Distintas salidas"" />
</div>  
</div>  
<pre><code class="language-csharp">#if DEBUG
Console.WriteLine(&quot;Solo visible en modo debug, directiva: DEBUG&quot;);
#endif
</code></pre>
<h2 id="sobreescribir-el-metodo-tostring">Sobreescribir el método ToString</h2>
<p>Otra de las cosas que puedes hacer es sobreescribir el método <code>ToString</code> en tus clases, ya que por default, C# regresará el nombre calificado del tipo que estamos llamando. Si, por ejemplo, hubiéramos sobreescrito el método en nuestra clase <code>TestClass</code> de la siguiente manera:</p>
<pre><code class="language-csharp">public class TestClass
{
    public string Propiedad1 { get; set; }
    public override string ToString()
    {
        return string.Format(&quot;{0}:{1}&quot;, nameof(Propiedad1), Propiedad1);
    }
</code></pre>
<p>Al llamar al método <code>Console.WriteLine</code> de la siguiente manera:</p>
<pre><code class="language-csharp">Console.WriteLine(tc);
</code></pre>
<p>Hubiéramos obtenido lo siguiente:</p>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-2">
Sin sobreescribir <code>ToString</code>
```csharp  
DebuggingTips.TestClass
```  
</div>
<div class="pure-u-1 pure-u-md-1-2">
Sobreescribiendo <code>ToString</code>
```csharp  
Propiedad1: Uno
```  
</div>  
</div>  
<h2 id="atributo-debuggerdisplay">Atributo DebuggerDisplay</h2>
<p>Existe una falla con usar <code>ToString</code>... y es que esta es una modificación que afectará a toda nuestra aplicación, aún cuando no estemos depurando el código. Para solucionarlo, podemos comentar ese código cuando ya no estemos depurando o envolver la sobreescritura en un <code>#if DEBUG</code>.</p>
<p>Pero bueno, las dos opciones suenan un poco mal. Si tu aplicación no tiene alguna forma de escribir en pantalla y únicamente vas a depurar en el IDE, puedes hacer uso del <a href="../atributos-c-sharp">atributo</a> <code>DebuggerDisplay</code></p>
<pre><code class="language-csharp">[DebuggerDisplay(&quot;Propiedad1: {Propiedad1}&quot;)]
public class TestClass
</code></pre>
<p>Que en pocas palabras, le dirá a nuestro entorno de desarrollo cómo debe mostrar los tipos de dato cuando estemos <em>debugueando</em>:</p>
<p>&lt;img src=&quot;/images/aprende-c-sharp__debugging__debugger-display.jpg&quot; title=<>Distintas salidas</> /&gt;</p>
<h2 id="metodos-de-la-clase-diagnostics.debug">Métodos de la clase Diagnostics.Debug</h2>
<p>Otra de las opciones que tenemos (y que yo descubrí recientemente) es la clase <code>Debug</code> en el <em>namespace</em> <code>System.Diagnostics</code>.</p>
<p>Primero, no siempre vas a estar programando aplicaciones que tengan una consola disponible, entonces no siempre vas a poder usar la clase <code>Console</code>, es aquí cuando podemos usar:</p>
<pre><code class="language-csharp">System.Diagnostics.Debug.WriteLine(tc + &quot;// Debug.WriteLine &quot;);
</code></pre>
<p>Que como puedes ver, es muy parecido al método que ya conoces. Con la diferencia de que este escribe a otro flujo de datos. En tu entorno de desarrollo generalmente lo podrás ver en la ventana de <em>Salida de la aplicación</em> o <em>Application output</em>:</p>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-2">
<img src="/images/aprende-c-sharp__debugging__writelines-vs.png" title=""Distintas salidas"" />
</div>
<div class="pure-u-1 pure-u-md-1-2">
<img src="/images/aprende-c-sharp__debugging__writelines-xs.jpg" title=""Distintas salidas"" />
</div>  
</div>  
<p>Hay ocasiones en las que solamente deseamos saber si una o varias condiciones se cumpliero, y pareciera que ese es trabajo para la sentencia de control <code>if</code>. O, podrías usar el método <code>WriteLineIf</code> si el valor enviado como primer parámetro es verdadero. Está de más decir que podemos llamar a ejecutar una función ahí dentro:</p>
<pre><code class="language-csharp">System.Diagnostics.Debug.WriteLineIf(tc.Propiedad1.Equals(&quot;Dos&quot;), tc);
</code></pre>
<p>En este post únicamente hablé del método <code>WriteLine</code> y <code>WriteLineIf</code>, pero tienes que saber que esta clase tiene muchas más características.</p>
<p>En futuros posts estaré hablando de más tips para depurar usando Visual Studio y Xamarin Studio, así que <a href="http://localhost:4000/unete/">no olvides suscribirte</a> para estar enterado.</p>


            </div>
          </div>
        
</body>
</html>
