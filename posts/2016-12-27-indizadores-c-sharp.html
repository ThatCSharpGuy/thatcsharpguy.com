<!DOCTYPE html>
<html lang="es"  itemscope itemtype="http://schema.org/Blog">
<head>
        <!–– Made with Lockdown: https://github.com/fferegrino/lockdown ––>
<meta charset="utf-8" />
<link rel="stylesheet" href="/css/main.css" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script data-ad-client="ca-pub-9566151416325480" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<title>Sobrecarga de indizadores en C# | That C# guy</title>
<!-- Search Engine -->
<meta name="description" content="Los indizadores en C# permiten dotar a tus tipos de dato de una forma más simple y expresiva para acceder a sus propiedades, además de ser una sintaxis con la que muchos desarrolladores ya están acostumbrados.">
<meta name="image" content="">
<!-- Schema.org for Google -->
<meta itemprop="name" content="Sobrecarga de indizadores en C#">
<meta itemprop="description" content="Los indizadores en C# permiten dotar a tus tipos de dato de una forma más simple y expresiva para acceder a sus propiedades, además de ser una sintaxis con la que muchos desarrolladores ya están acostumbrados.">
<meta itemprop="image" content="">
<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Sobrecarga de indizadores en C#">
<meta name="twitter:description" content="Los indizadores en C# permiten dotar a tus tipos de dato de una forma más simple y expresiva para acceder a sus propiedades, además de ser una sintaxis con la que muchos desarrolladores ya están acostumbrados.">
<meta name="twitter:site" content="@io_exception">
<meta name="twitter:creator" content="@io_exception">
<meta name="twitter:image" content="">
<!-- Open Graph general (Facebook, Pinterest & Google+) -->
<meta name="og:title" content="Sobrecarga de indizadores en C#">
<meta name="og:description" content="Los indizadores en C# permiten dotar a tus tipos de dato de una forma más simple y expresiva para acceder a sus propiedades, además de ser una sintaxis con la que muchos desarrolladores ya están acostumbrados.">
<meta name="og:image" content="">
<meta name="og:url" content="https://thatcsharpguy.com/posts/2016-12-27-indizadores-c-sharp.html">
<meta name="og:site_name" content="That C# guy">
<meta name="og:locale" content="es">
<meta name="og:type" content="website">


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPXCSH21CP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GPXCSH21CP');
</script>

        
</head>

<body>  
        <header class="site-header ui">
    <div class="wrapper menu">
      <nav class="site-nav">
        <a href="#" class="menu-icon">
          <svg viewBox="0 0 18 15">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </a>
        <div class="trigger">
          <a class="link page-link" href="/">Home</a>
          <!-- <a class="link page-link" href="/about">About</a> -->
          <!-- <a class="link page-link" href="/search">Search</a> -->
        </div>
      </nav>
    </div>
    <div class="wrapper title">
      <div class="pure-g">
        <div class="pure-u-1-24 title-number"><span>1</span></div>
        <div class="pure-u-11-24 content-window">
          <a class="site-title" href="/">That C# guy</a>
        </div>
        <div class="pure-u-12-24 header-menu">
          <ul>
            <!-- <li class="datascience"><a href="/tag/data-science/">Data Science!</a></li> -->
            <li class="youtube"><a href="https://www.youtube.com/c/thatcsharpguy">YouTube</a></li>
            <!-- <li class="csharp"><a href="/tag/aprendecsharp/">Aprende C#</a></li> -->
            <!-- <li class="xamarin"><a href="/tag/xamarin/">Xamarin</a></li> -->
          </ul>
        </div>
      </div>
  
  </header>
        <div class="page-content">
            <div class="wrapper">
                
<h1>Sobrecarga de indizadores en C#</h1>

<p>Seguramente estás muy, pero muy familiarizado con el tema del que hablaré en este post, y es que, ¿quién no ha utilizado algo así: <code>lista[0] = 9;</code> en sus programas?</p>
<p>A esta sintaxis se le coonoce como <em>indizadores</em>. Es muy común que la has visto antes en colecciones, como en arreglos y la clase <code>List</code>, sin embargo, es muy poco conocido que nosotros, como desarrolladores, podemos permitir que otros desarrolladores usen esta sintaxis en las clases que nosotros creamos.</p>
<p>Podemos ver a los corchetes cuadrados como un operador de acceso a los elementos de determinada instancia, como es el caso de las listas, arreglos o diccionarios. Y aunque su uso se recomienda precisamente para eso (<strong>acceso a los elementos de una colección</strong>), podemos darle otros usos. Pero antes de ver cómo funcionan, vamos a ver la sintaxis.</p>
<h2 id="sintaxis">Sintaxis</h2>
<p>Para implementar un indizador en nuestros tipos de dato tenemos que seguir una sintaxis que resulta un poco extraña cuando la vez:</p>
<pre><code class="language-csharp">
public int this[int index]
{
    get { /* Regresa un tipo entero */ }
    set { /* Establece el valor de &quot;value&quot; que es de tipo entero */ }
}   
</code></pre>
<p>En general, para crear un indizador debemos escribir lo siguiente:</p>
<ul>
<li>El modificador de acceso (public, internal, private...)</li>
<li>El tipo de dato del indizador.</li>
<li>La palabra reservada <code>this</code>.</li>
<li>Los parámetros del indizador entre corchetes cuadrados.</li>
<li>La especificación del acceso mediante bloques: lectura con <code>get</code>, escritura con <code>set</code>.</li>
<li>*Si especificamos <code>get</code> debemos regresar un valor en el bloque.</li>
<li>*Si especificamos <code>set</code> tenemos a nuestra disposición el identificador <code>value</code> que hace referencia al valor que debe ser asignado.</li>
</ul>
<p>Supón que tenemos una clase especificada de la siguiente manera:</p>
<pre><code class="language-csharp">public class Indexer
{
    public int this[string position]
    {
        get
        {
            Console.WriteLine(&quot;Accediendo a {0}&quot;, position);
            return 0; // Importante regresar un dato
        }
        set
        {
            // value contiene el dato que se va a establecer
            Console.WriteLine(&quot;Estableciendo {0} en la posición {1}&quot;, value, position);
        }
    }
</code></pre>
<p>Que define un indizador de tipo <code>int</code> que como índice usa un tipo <code>string</code>. Entonces al ejecutar el siguiente código:</p>
<pre><code class="language-csharp">var indizador = new Indexer();
var retorno = indizador[&quot;hola&quot;];
indizador[&quot;feliz&quot;] = 2017;
Console.WriteLine(&quot;Valor de retorno {0}&quot;, retorno);
</code></pre>
<p>Obtendremos en la pantalla:</p>
<pre>
Accediendo a hola
Estableciendo 2017 en la posición feliz
Valor de retorno 0
</pre>
<p>Es importante notar que como parámetros del indizador podemos usar cualquier tipo de dato, no solo enteros o cadenas. Como en el siguiente ejemplo que se emplea un tipo <code>Indexer</code> como indizador y solo se implementa el bloque <code>get</code>:</p>
<pre><code class="language-csharp">public string this[Indexer indexer]
{
    get { return indexer.ToString(); }
}
// ...
var otroIndizador = new Indexer();
Console.WriteLine(indizador[otroIndizador]); // Imprime: &quot;Indizadores.Indexer&quot;
</code></pre>
<p>O en este otro ejemplo, en donde se usa un tipo <code>double</code> como parámetro para un índice del tipo <code>Indexer</code>. En él se implementa únicamente el bloque <code>set</code>:</p>
<pre><code class="language-csharp">public Indexer this[double position]
{
    set { Console.WriteLine(&quot;\&quot;Insertando\&quot; {1} en {0}&quot;, position, value); }
}
// ...
indizador[123.456d] = otroIndizador; // Mostrará en pantalla: &quot;Insertando&quot; Indizadores.Indexer en 123.456
</code></pre>
<p>Podemos usar cualquier cantidad de índices, así como regresar cualquier tipo de dato, por ejemplo, podemos tener un indizador que acepte 3 parámetros de tipo <code>int</code>, <code>bool</code> y <code>double</code> y regrese una cadena:</p>
<pre><code class="language-csharp">public string this[int i, bool b, double d]
{
    get { return String.Format(&quot;I'm an indexer: {0} {1} {2}&quot;, i, b, d); }
}

//

var resultado1 = indizador[10, false, 10];
Console.WriteLine(resultado1); // Imprime: &quot;I'm an indexer: 10 False 5&quot;
</code></pre>
<p>En cierto modo podemos ver los indizadores como una especie de métodos con algunas restricciones, entre ellas la de que sus índices no pueden ser del tipo <a href="../out-ref-c-sharp" target="_blank"><code>out</code> o <code>ref</code></a>.</p>
<p>Al final los indizadores terminan siendo transformados en métodos por el compilador, y es que solo son parte de la <a href="https://www.youtube.com/watch?v=Ypgw-TgT70I" target="_blank">azúcar sintáctica</a> que nos ofrece C#.</p>
<h2 id="por-que-usarlos">¿Por qué usarlos?</h2>
<p>Imagina que tienes una clase llamada <code>Alphabet</code> que almacena todas las letras de determinado alfabeto y para acceder a ellas nos ofrece un método llamado <code>CharacterAt(int position)</code> para acceder a determinado caracter dentro del alfabeto:</p>
<pre><code class="language-csharp">public class Alphabet
{
    List&lt;char&gt; caracteres;
    private Alphabet(params char[] caracteres)
    {
        this.caracteres = new List&lt;char&gt;(caracteres);
    }

    public char CharacterAt(int position)
    {
        return caracteres[position];
    }
    // ...

var griego = Alphabet.Greek;
var segundaLetra = griego.CharacterAt(2);
</code></pre>
<p>Hay ocasiones en que esta sintaxis (usar un método) tiene mucho sentido y le da significado al programa que está escribiendo, sin embargo, hay otras en las que es mejor usar un indizador. Por ejemplo, ¿no crees que, si usáramos un indizador, nuestro código tendría más sentido?</p>
<pre><code class="language-csharp">var griego = Alphabet.Greek;
var segundaLetra = griego[2];
</code></pre>
<p>El indizador para la clase <code>Alphabet</code> se ve así:</p>
<pre><code class="language-csharp">public char this[int i]
{
    get { return caracteres[i]; }
}
</code></pre>
<h2 id="ejemplos">Ejemplos</h2>
<p>Además de los ya mencionados, en el framework de .NET y en algunos otros muy usados, los indizadores son uno de los elementos más empleados. Por ejemplo, uno de los lugares más comunes en donde aparecen es en los tipos de dato <code>string</code>.</p>
<p>Cuando trabajamos con WebForms, la variable <code>Session</code> también implementa un indizador que recibe una cadena para acceder a los valores que hemos almacenado en ella previamente.</p>
<p>Recuerda que puedes <a href="https://github.com/ThatCSharpGuy/aprende-c-sharp/tree/master/Indizadores" target="_blank">descargar el código fuente</a> de los ejemplos para que practiques con él, y que cualquier duda de la puedes hacer llegar usando los botones de contacto de abajo.</p>


            </div>
          </div>
        <footer class="site-footer ui">
   <div class="wrapper pure-g">
      <div class="pure-u-1 pure-u-md-8-24">
         <div class="footer-content">
            <ul class="icon-list">
        <li id="em">
            <a href="mailto:feregrino@thatcsharpguy.com" class="contact">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M31 11.815v13.292q0 1.105-.787 1.892-.787.78-1.892.78H3.68q-1.106 0-1.893-.79Q1 26.21 1 25.102v-13.29q.737.82 1.69 1.46 6.06 4.12 8.32 5.78.955.705 1.55 1.1.594.392 1.582.802.987.41 1.84.41h.035q.854 0 1.84-.41.99-.41 1.583-.804.595-.393 1.55-1.096 2.845-2.06 8.336-5.778.954-.652 1.674-1.455zm0-4.922q0 1.322-.82 2.528t-2.043 2.06l-7.835 5.44-.71.51q-.545.4-.905.64t-.87.55q-.51.3-.963.45-.452.15-.837.15h-.034q-.385 0-.837-.15-.452-.15-.962-.45-.51-.302-.87-.544-.36-.243-.905-.637l-.72-.51q-1.525-1.07-4.388-3.055-2.86-1.984-3.43-2.386-1.04-.704-1.96-1.935Q1 8.315 1 7.26q0-1.305.695-2.175.695-.87 1.984-.87h24.64q1.09 0 1.88.786.792.79.792 1.9z"/></svg>
            </a>
        </li>
        <li id="gh">
            <a href="https://github.com/ThatCSharpGuy" class="contact">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M31 16.37q0 4.9-2.86 8.8-2.86 3.93-7.4 5.43-.52.1-.77-.13-.24-.24-.24-.6v-4.1q0-1.9-1.02-2.78 1.2-.2 2.1-.4.9-.3 1.87-.8.95-.5 1.58-1.3.65-.8 1.05-2.1.4-1.27.4-2.93 0-2.38-1.54-4.04.7-1.78-.16-3.98-.57-.2-1.6.2t-1.8.85l-.75.47q-1.83-.5-3.76-.5t-3.76.5l-.8-.54Q11 8.16 9.9 7.7q-1.13-.4-1.7-.23-.86 2.2-.14 3.97-1.54 1.68-1.54 4.05 0 1.6.4 2.9.4 1.23 1.02 2.02.63.8 1.58 1.3.94.53 1.83.77.9.25 2 .37-.77.7-.94 2-.4.2-.82.3-.47.1-1.1.1-.66 0-1.3-.44-.63-.4-1.08-1.2-.38-.63-.95-1-.52-.4-.9-.5l-.4-.03q-.4 0-.57.1-.15.1-.1.24.06.13.18.26t.26.2l.15.1q.44.2.86.73t.63 1l.2.43q.23.75.84 1.2.6.47 1.3.6.7.13 1.34.14.65 0 1.08-.04l.46-.08v2.74q0 .35-.26.6-.25.22-.8.12-4.5-1.5-7.37-5.42-3-3.74-3-8.64 0-4.1 2-7.54 2-3.44 5.45-5.46 3.45-2 7.53-2t7.6 2q3.4 2 5.4 5.46 2 3.44 2 7.53z"/></svg>
            </a>
        </li>
        <li id="yt">
            <a href="https://www.youtube.com/c/thatcsharpguy" class="contact">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M22.43 15.714c0-.413-.17-.714-.504-.904l-8.57-5.357c-.347-.223-.71-.234-1.09-.033-.368.2-.552.513-.552.937V21.07c0 .426.184.738.553.94.178.088.35.133.52.133.222 0 .412-.056.568-.168l8.57-5.357c.336-.19.504-.49.504-.904zm8.57 0c0 1.072-.006 1.91-.017 2.51-.01.604-.058 1.366-.142 2.287-.083.92-.208 1.744-.376 2.47-.178.815-.563 1.5-1.155 2.06-.592.557-1.284.88-2.077.97-2.477.28-6.222.42-11.233.42-5.01 0-8.756-.14-11.233-.42-.793-.09-1.487-.413-2.085-.97-.597-.56-.984-1.245-1.163-2.06-.157-.726-.277-1.55-.36-2.47-.085-.92-.132-1.682-.143-2.285-.01-.602-.017-1.44-.017-2.51 0-1.072.006-1.91.017-2.512.01-.603.058-1.364.142-2.285.083-.92.208-1.744.376-2.47.178-.814.563-1.5 1.155-2.058.592-.56 1.284-.882 2.077-.97C7.244 5.14 10.99 5 16 5c5.01 0 8.756.14 11.233.42.793.088 1.487.41 2.085.97.597.558.984 1.244 1.163 2.06.157.724.277 1.547.36 2.468.085.92.132 1.682.143 2.285.01.603.017 1.44.017 2.51z"/></svg>
            </a>
        </li>
        <li id="tw">
            <a href="https://twitter.com/io_exception" class="contact">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M31 6.7q-1.28 1.88-3.08 3.2.02.26.02.8 0 2.46-.73 4.93-.7 2.46-2.2 4.73-1.46 2.26-3.5 4-2.04 1.75-4.9 2.8-2.88 1.02-6.16 1.02-5.16 0-9.44-2.76.67.08 1.48.08 4.3 0 7.64-2.63-2-.04-3.58-1.23-1.58-1.2-2.17-3.03.63.1 1.16.1.82 0 1.62-.2-2.13-.44-3.53-2.13-1.4-1.68-1.4-3.9v-.1q1.3.74 2.78.8-1.26-.84-2-2.2-.74-1.35-.74-2.93 0-1.67.83-3.1 2.3 2.84 5.6 4.54 3.3 1.7 7.07 1.9-.15-.73-.15-1.4 0-2.57 1.8-4.36 1.8-1.8 4.35-1.8 2.66 0 4.5 1.94 2.07-.4 3.9-1.5-.7 2.2-2.7 3.4 1.76-.2 3.53-.95z"/></svg>
            </a>
        </li>    
        <li id="fb">
            <a href="https://www.facebook.com/thatcsharpguy" class="contact">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.512 1.488c.325.326.488.716.488 1.172v26.68c0 .456-.163.846-.488 1.172-.326.325-.716.488-1.172.488h-7.637V19.38h3.887l.586-4.532h-4.473v-2.89c0-.73.153-1.277.46-1.642.305-.364.9-.546 1.786-.546l2.382-.02V5.707c-.82-.117-1.98-.176-3.477-.176-1.77 0-3.186.522-4.248 1.564-1.06 1.04-1.59 2.513-1.59 4.414v3.34h-3.908v4.53h3.906V31H2.66c-.456 0-.846-.163-1.172-.488C1.163 30.186 1 29.796 1 29.34V2.66c0-.456.163-.846.488-1.172C1.814 1.163 2.204 1 2.66 1h26.68c.456 0 .846.163 1.172.488z"/></svg>
            </a>
        </li>
        <li id="gp">
            <a href="https://www.google.com/+Thatcsharpguy" class="contact">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.9 14.25h-2.7v-2.72h-2.73v2.72h-2.7v2.72h2.7v2.7h2.72v-2.7h2.7v-2.72M10.5 17.5h5.4c-.22 1.4-1.64 4.12-5.4 4.12-3.25 0-5.9-2.7-5.9-6 0-3.33 2.65-6.02 5.9-6.02 1.85 0 3.08.78 3.8 1.46l2.58-2.48c-1.66-1.55-3.8-2.5-6.38-2.5C5.26 6.1 1 10.35 1 15.62s4.26 9.52 9.52 9.52c5.5 0 9.14-3.86 9.14-9.3 0-.62-.07-1.1-.15-1.57h-8.96"/></svg>
            </a>
        </li>
    </ul>
    <ul class="icon-list">
        <li>
            <a href="#">
                <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M7 18.89v-5.88H1.15v-6H7V1.1h6v5.91h6V1.1h6v5.91h5.85v6H25v5.88h5.85v6H25v5.912h-6v-5.91h-6v5.91H7v-5.91H1.15v-6H7zm6 0v-5.88h6v5.88h-6z" fill="#3C8A3F" fill-rule="evenodd"/></svg>
            </a>
        </li>
    </ul>
         </div>
      </div>
      <div class="pure-u-1 pure-u-md-6-24">
      </div>
      <div class="pure-u-1 pure-u-md-10-24">
         <div class="footer-content">
         </div>
      </div>
   </div>
</footer>
</body>
</html>
