<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c"></meta>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2176ff">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">
<title>Trabajando con imágenes e ImageProcessor | That C# guy</title>
<!-- Search Engine -->
<meta name="description" content="Es muy probable que ya te hayas enfrentado o que tengas que enfrentarte con el trabajo procesar imágenes en un sistema, puede ser algo tan simple como cargar y recortar las imagenes de perfil de usuarios a un sistema o...">
<meta name="image" content="">
<!-- Schema.org for Google -->
<meta itemprop="name" content="Trabajando con imágenes e ImageProcessor">
<meta itemprop="description" content="Es muy probable que ya te hayas enfrentado o que tengas que enfrentarte con el trabajo procesar imágenes en un sistema, puede ser algo tan simple como cargar y recortar las imagenes de perfil de usuarios a un sistema o...">
<meta itemprop="image" content="">
<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Trabajando con imágenes e ImageProcessor">
<meta name="twitter:description" content="Es muy probable que ya te hayas enfrentado o que tengas que enfrentarte con el trabajo procesar imágenes en un sistema, puede ser algo tan simple como cargar y recortar las imagenes de perfil de usuarios a un sistema o...">
<meta name="twitter:site" content="@thatcsharpguy">
<meta name="twitter:creator" content="@io_exception">
<meta name="twitter:image" content="">
<!-- Open Graph general (Facebook, Pinterest & Google+) -->
<meta name="og:title" content="Trabajando con imágenes e ImageProcessor">
<meta name="og:description" content="Es muy probable que ya te hayas enfrentado o que tengas que enfrentarte con el trabajo procesar imágenes en un sistema, puede ser algo tan simple como cargar y recortar las imagenes de perfil de usuarios a un sistema o...">
<meta name="og:image" content="">
<meta name="og:url" content="https://thatcsharpguy.com/post/trabajando-con-imagenes-e-imageprocessor">
<meta name="og:site_name" content="That C# guy">
<meta name="og:locale" content="es">
<meta name="og:type" content="website">
  <script src="https://kit.fontawesome.com/0271495296.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Open+Sans:ital,wght@0,300;0,400;0,600;0,800;1,400;1,800&display=swap" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css"> -->
  <link rel="stylesheet" href="/css/main.css">
  <script src="/js/main.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8"
        src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>

















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: ;
    background-color: ;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: ;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>


  <body>


<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">

      <span class="site-brand">
<a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="That C# guy" src="" onerror="this.style.display='none'">
  That C# guy
</a>
      </span>

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="https://github.com/fferegrino">GitHub</a>
            <a class="page-link" href="https://twitter.com/io_exception">Twitter</a>
            <a class="page-link" href="https://youtube.com/thatcsharpguy">YouTube</a>
            <a class="page-link" href="https://tcsg.dev/discord">Discord</a>

            <span class="page-link">

  <div id="google_translate_element" style="display: none;"></div>
  <span class="ct-language">
     <ul class="list-unstyled ct-language-dropdown">
       <li>
          <a href="#" class="lang-select" data-lang="es">
          <img src="https://www.countryflags.io/mx/flat/64.png" title="México">
          </a>
       </li>
        <li>
           <a href="#" class="lang-select" data-lang="en">
           <img src="https://www.countryflags.io/gb/flat/64.png" title="English">
           </a>
        </li>
        <li>
           <a href="#" class="lang-select" data-lang="fr">
           <img src="https://www.countryflags.io/fr/flat/64.png" title="Franch">
           </a>
        </li>
        <li>
           <a href="#" class="lang-select" data-lang="zh-CN">
           <img src="https://www.countryflags.io/cn/flat/64.png" title="Chinese(Simple)">
           </a>
        </li>
        <li>
           <a href="#" class="lang-select" data-lang="ja">
           <img src="https://www.countryflags.io/jp/flat/64.png" title="Japan">
           </a>
        </li>
        <li>
           <a href="#" class="lang-select" data-lang="ko">
           <img src="https://www.countryflags.io/kr/flat/64.png" title="Korean">
           </a>
        </li>
        <li>
           <a href="#" class="lang-select" data-lang="ru">
           <img src="https://www.countryflags.io/ru/flat/64.png" title="Russia">
           </a>
        </li>
     </ul>
  </span>
  <script type="text/javascript">
     function googleTranslateElementInit() {
       new google.translate.TranslateElement({
         pageLanguage: '',
         autoDisplay: false,
         layout: google.translate.TranslateElement.InlineLayout.VERTICAL
       }, 'google_translate_element');
     
       function restoreLang() {
         var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
         if (!iframe) return;
     
         var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
         var restore_el = innerDoc.getElementsByTagName("button");
     
         for (var i = 0; i < restore_el.length; i++) {
           if (restore_el[i].id.indexOf("restore") >= 0) {
             restore_el[i].click();
             var close_el = innerDoc.getElementsByClassName("goog-close-link");
             close_el[0].click();
             return;
           }
         }
       }
     
       function triggerHtmlEvent(element, eventName) {
         var event;
         if (document.createEvent) {
           event = document.createEvent('HTMLEvents');
           event.initEvent(eventName, true, true);
           element.dispatchEvent(event);
         } else {
           event = document.createEventObject();
           event.eventType = eventName;
           element.fireEvent('on' + event.eventType, event);
         }
       }
     
       var googleCombo = document.querySelector("select.goog-te-combo");
       var langSelect = document.querySelector('.ct-language');
       langSelect.addEventListener('click', function(event) {
         if (!event.target) {
           return;
         }
     
         var selected = document.querySelector('.ct-language .ct-language-selected');
         if (selected) {
           selected.classList.remove('ct-language-selected');
         }
     
         var target = event.target;
         while (target && target !== langSelect ) {
           if (target.matches('.lang-select')) {
             break;
           }
           target = target.parentElement;
         }
     
         if (target && target.matches('.lang-select')) {
           var lang = target.getAttribute('data-lang');
           if (lang == "es") {
             restoreLang();
           } else {
             target.parentElement.classList.add('ct-language-selected');
             googleCombo.value = lang;
             triggerHtmlEvent(googleCombo, 'change');
           }
         }
     
         event.preventDefault();
       });
     }
  </script>
  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>            </span>
            
        </div>
      </nav>
    </div>
  </div>
</header>

<script>
  (function() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;


      var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  })();
</script>























<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>

<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light"><i class="fas fa-sun"></i></p>
      <p class="dark"><i class="fas fa-moon"></i></p>
    </div>
  </label>
</div>





<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        
<div class="framework">
  <section class="main">
     
<div class="post">
  <section>
    

<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Trabajando con im&#225;genes e ImageProcessor</h1>
  <!-- <h3 class="post-subtitle">Ingenier&#237;a de software + Ciencia de datos + MLOps</h3> -->

  <p class="post-meta">
    <time class="dt-published" datetime="" itemprop="datePublished">
      <i class="fas fa-calendar"></i> July 11, 2016
    </time>
    
    <span class="post-reading-time left-vsplit"><i class="fas fa-user"></i> Antonio Feregrino</span>
  </p>

  <div class="post-tags">
    <!-- <a class="post-tag" href="/tag/nugetrecomendado">#nugetrecomendado</a> -->
    <a class="post-tag" href="#">#nugetrecomendado</a>
  </div>

</header>

    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
      <div class="post-content e-content" itemprop="articleBody">
         
<p>Hoy toca hablar de otro <a href="http://thatcsharpguy.com/tag/NuGetRecomendado">#NuGetRecomendado</a>. Este es tal vez uno de los más entretenidos que he usado en mi vida, espero que tu también lo encuentres así.</p>
<p>Es muy probable que ya te hayas enfrentado o que tengas que enfrentarte con este problema en el futuro: Procesamiento de imagenes. Puede ser algo tan simple como cargar y recortar las imagenes de perfil de usuarios a un sistema o aplicar filtos a fotos al más puro estilo de Instagram, como programadores comenzamos a imaginarnos y a investigar cómo podemos realizar esta tareas... o, tal vez busquemos mejor una librería para hacerlo.</p>
<p>Esta es precisamente una tarea para <a href="http://imageprocessor.org/" target="_blank" rel="nofollow"><i>ImageProcessor</i></a>, una librería para realizar algunas operaciones sobre imagenes con la ayuda de sus métodos, pero vamos a ver cómo se usa:</p>
<h2 id="comenzando">Comenzando</h2>
<p>Vamos a trabajar con esta imagen:</p>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/balon.jpg" title="Balón" />
<p>Para comenzar a trabajar con una imagen, es necesario cargarla y con <em>ImageProcessor</em> esta tarea se realiza a través de una instancia de <code>ImageFactory</code> y un flujo de datos (en este caso un <code>MemoryStream</code>), los colocamos dentro de <code>using</code> para facilitarnos el manejo de memoria:</p>
<pre><code class="language-csharp">var balonBytes = File.ReadAllBytes(&quot;photo/balon.jpg&quot;);

using (var inStream = new MemoryStream(balonBytes))
using (var imageFactory = new ImageFactory(false))
{
</code></pre>
<h3 id="load">Load</h3>
<p>Una vez creada la <code>imageFactory</code> podemos cargar nuestra imagen usando el método <code>Load</code>:</p>
<pre><code class="language-csharp">var img = imageFactory.Load(inStream);
</code></pre>
<h3 id="resize">Resize</h3>
<p>Una vez cargada, podemos comenzar a aplicar las transformaciones. Por ejemplo, cambiar el tamaño:</p>
<pre><code class="language-csharp">img.Resize(new Size(300, 0));
</code></pre>
<h3 id="save">Save</h3>
<p>Hasta este punto, tenemos la imagen modificada en memoria, así que nuestro <code>imageFactory</code> nos provee un método para guardarla en disco:</p>
<pre><code class="language-csharp">img.Save(&quot;photo/bolaResized.jpg&quot;);
</code></pre>
<p>Tras lo cual nos queda la siguiente imagen:</p>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/bolaResized.jpg" title="Balón" />
<h2 id="api-fluida">API fluída</h2>
<p>Para nuestra conveniencia, <em>ImageProcessor</em> provee una API fluída (fluent API) para encadenar todos los métodos anteriores, por ejemplo, el código anterior se puede reescribir de la siguiente manera:</p>
<pre><code class="language-csharp">imageFactory.Load(inStream)
            .Resize(new Size(300, 0))
            .Save(&quot;photo/bolaResized.jpg&quot;);
</code></pre>
<h3 id="quality">Quality</h3>
<p>Otra de las transformaciones que permite es la de reducir la calidad de una imagen, esto a través del método <code>Quality</code> que recibe número con la nueva calidad de la imagen:</p>
<pre><code class="language-csharp">imageFactory.Load(inStream)
            .Quality(5) // Only works with jpg
            .Save(&quot;photo/bolaLow.jpg&quot;);
</code></pre>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/bolaLow.jpg" title="Balón" />
<h3 id="format">Format</h3>
<p>Trabajar con diversos formatos de archivo a veces puede ser un poco complicado, es por eso que esta librería también permite cambiar el formato de la imagen, por ejemplo, en esta convertimos la imagen de <code>jpg</code> a <code>png</code>:</p>
<pre><code class="language-csharp">imageFactory.Load(inStream)
            .Format(new PngFormat { Quality = 10 })
            .Save(&quot;photo/balon.png&quot;);
</code></pre>
<h2 id="transformaciones-en-la-imagen">Transformaciones en la imagen</h2>
<p>Además de cosas como cambio de formatos, de tamaño y de calidad <em>ImageProcessor</em> también permite modificar la imagen para aplicarle algunos efectos y transformaciones al contenido, para este ejemplo vamos a trabajar con la foto de la perrita Micha:</p>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/micha.jpg" title="Micha" />
<h3 id="filter">Filter</h3>
<p>Al más puro estilo de Instagram, podemos aplicarle filtros a la imagen con el método <code>Filter</code>, la librería tiene ya definidos algunos filtos como sepia y escala de grises, entre otros. O si estás muy inspirado, puedes crear el tuyo propio:</p>
<pre><code class="language-csharp">imageFactory.Load(inStream)
            .Filter(MatrixFilters.HiSatch)
            .Save(&quot;photo/michaArt.jpg&quot;);
</code></pre>
<p>Y este es el resultado:</p>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/michaArt.jpg" title="Micha" />
  
Qué sería de esta ibrería si no diera la capacidad de invertir los colores de una imagen. Esta transformación no requiere de mucha explicación, salvo que se usa el método `Filter` con el filtro `Invert`: 
<pre><code class="language-csharp">imageFactory.Load(inStream)
            .Filter(MatrixFilters.Invert)
            .Save(&quot;photo/michaInverse.jpg&quot;);
</code></pre>
<p>Y este es el resultado:</p>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/michaInverse.jpg" title="Micha" />
<h3 id="michstagram-filter-tint-y-saturation">Michstagram (Filter, Tint y Saturation)</h3>
<p>Aprovechando que se pueden encadenar varias transformaciones gracias a la API fluída podemos crear un pequeño instagram para Micha:</p>
<pre><code class="language-csharp">imageFactory.Load(inStream)
            .Filter(MatrixFilters.Sepia)
            .Tint(Color.LightSalmon)
            .Saturation(50)
            .Save(&quot;photo/michaInstagram.jpg&quot;);
</code></pre>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/michaInstagram.jpg" title="Micha" />
<h3 id="mas-transformaciones">Más transformaciones</h3>
<p><em>ImageProcessor</em> no se queda ahí, sino que también nos deja recortar recuadros de la imagen, girarla e invertirla respecto a determinado eje. Para la demostración mira la siguiente imagen:</p>
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/motherboard.jpg" title="Motherboard" />
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-3">       
<h3>Crop</h3>
```csharp  
var m = imageFactory.Load(inStream)
        .Crop(new Rectangle(100, 100, 250, 250))
        .Save("photo/motherboardCropped.jpg");
```  
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/motherboardCropped.jpg" title="Motherboard" />
</div>
<div class="pure-u-1 pure-u-md-1-3">  
<h3>Rotate</h3>  
```csharp  
m.Rotate(10f)
 .Save("photo/motherboardRotated.jpg");  
 
```  
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/motherboardRotated.jpg" title="Motherboard" />
</div>  
<div class="pure-u-1 pure-u-md-1-3">  
<h3>Flip</h3>
```csharp  
m.Flip(true, true)
 .Save("photo/motherboardFlipped.jpg");  
 
```  
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/motherboardFlipped.jpg" title="Motherboard" />
</div>  
</div> 
<h2 id="extras">Extras</h2>
<p>Usando una combinación de APIs se pueden crear aplicaciones más interesantes, por ejemplo, con el uso de los <a href="https://www.microsoft.com/cognitive-services/en-us/apis" target="_blank" rel="nofollow">Cognitive Services</a> y en especifico, el reconocimiento de caras, se pueden lograr cosas como estas:</p>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-3-4">
```csharp  
Face face = null;
using (var inStream = new MemoryStream(robbieBytes))
{
    var detectionTask = faceServiceClient.DetectAsync(inStream);
    detectionTask.Wait();
    face = detectionTask.Result.FirstOrDefault();
}
<p>var faceContainer = new Rectangle(face.FaceRectangle.Left,
face.FaceRectangle.Top, face.FaceRectangle.Width, face.FaceRectangle.Height);
using (var inStream = new MemoryStream(robbieBytes))
using (var imageFactory = new ImageFactory(false))
{
imageFactory.Load(inStream)
.Crop(faceContainer)
.Save(&quot;photo/robbieFace.jpg&quot;);
}</p>
<pre><code>&lt;/div&gt;
&lt;div class=&quot;pure-u-1 pure-u-md-1-4&quot;&gt;
&lt;img src=&quot;https://thatcsharpguy.github.io/postimages/imageprocessor/robbie3.jpg&quot; title=&quot;Robbie Williams&quot; /&gt;

&lt;img src=&quot;https://thatcsharpguy.github.io/postimages/imageprocessor/robbieFace.jpg&quot; title=&quot;Robbie Williams face&quot; /&gt;
&lt;/div&gt;
&lt;/div&gt;     

O mejor aún, podemos detectar las caras aplicarle algunas transformaciones como pixelizarlas: 

```csharp  
Face[] faces;
using (var inStream = new MemoryStream(friendsBytes))
{
    var detectionTask = faceServiceClient.DetectAsync(inStream);
    detectionTask.Wait();
    faces = detectionTask.Result;
}

using (var inStream = new MemoryStream(friendsBytes))
using (var imageFactory = new ImageFactory(false))
{
    var friendsImage = imageFactory.Load(inStream);
    foreach (var f in faces)
    {
        var faceContainer = new Rectangle(f.FaceRectangle.Left, f.FaceRectangle.Top, 
            f.FaceRectangle.Width, f.FaceRectangle.Height);
        friendsImage.Pixelate(20, faceContainer);
    }
    friendsImage.Save(&quot;photo/friendsAnonymous.jpg&quot;);
}
</code></pre>
<div class="pure-g">
<div class="pure-u-1 pure-u-md-1-2">
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/friends2.jpg" title="Friends" />
</div>
<div class="pure-u-1 pure-u-md-1-2">
<img src="https://thatcsharpguy.github.io/postimages/imageprocessor/friendsAnonymous.jpg" title="Friends anon" />
</div>
</div>  
<h2 id="conclusion">Conclusión</h2>
<p>No hay mucho que decir sobre <em>ImageProcessor</em>, salvo que es una librería muy potente y que nunca está de más contemplarla para proyectos en los que se requiere manipular imágenes. Si bien me parece que podrían ser añadidos otros métodos, los que tiene son de gran provecho. También ten en cuenta que yo no he hablado de todos los métodos disponibles, y te invito a que veas la <a href="http://imageprocessor.org/imageprocessor/imagefactory/" target="_blank" rel="nofollow">documentación completa</a> para conocerlos todos.</p>
<h1 id="instalacion">Instalación</h1>
<p>Como siempre, hay que buscar en el gestor de paquetes de NuGet: <code>ImageProcessor</code></p>
<p>O desde la consola:</p>
<pre><code>PM&gt; Install-Package ImageProcessor
</code></pre>
<p>No olvides echarle un ojo al <a href="https://github.com/JimBobSquarePants/ImageProcessor" target="_blank" >proyecto en GitHub</a> o en el <a href="http://imageprocessor.org" target="_blank">sitio web del proyecto</a>. Y de nueva cuenta, te invito a <strong><a href="https://github.com/ThatCSharpGuy/ImageProcessor-Sample" target="_blank">descargar el código</a></strong> y hagas pruebas con él.</p>


      </div>
  </article>




  </section>
</div>

  </section>
  <section class="sidebar" style="margin-left: 15px;">
<style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
  </section>
</div>

      </div>
    </main>

<footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
      <div> </div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a></div>
    </div>
  </div>
</footer>

  </body>
</html>
